<div class="container">
  <div class="login-wrapper">
    <!-- Logo/Branding Section -->
    <div class="brand-section">
      <div class="logo-container">
        <mat-icon class="logo-icon">school</mat-icon>
      </div>
      <h1 class="app-name">Learn<span class="highlight">ZY</span></h1>
    </div>

    <mat-card class="login-container">
      <mat-card-title class="login-title">
        Sign In
      </mat-card-title>
      <mat-card-subtitle>Welcome back! Please login to your account</mat-card-subtitle>

      <mat-card-content>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <!-- Username Field -->
          <mat-form-field appearance="outline" class="input-field">
            <mat-label>Username</mat-label>
            <input matInput type="text" formControlName="username" required />
            <mat-icon matSuffix class="field-icon">person</mat-icon>
            <mat-error *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched">
              Username is required
            </mat-error>
          </mat-form-field>

          <!-- Password Field -->
          <mat-form-field appearance="outline" class="input-field">
            <mat-label>Password</mat-label>
            <input
              matInput
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password"
              required
              (input)="onPasswordInput($event)"
            />
            <mat-icon matSuffix class="field-icon">lock</mat-icon>
            <!-- Conditionally render the visibility toggle icon -->
            <button
              mat-icon-button
              matSuffix
              *ngIf="showVisibilityIcon"
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'Toggle password visibility'"
              type="button"
            >
              <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
              Password is required
            </mat-error>
          </mat-form-field>

          <!-- Forgot Password Link -->
          <div class="forgot-password">
            <a href="#">Forgot Password?</a>
          </div>

          <!-- Login Button -->
          <mat-card-actions>
            <button
              mat-raised-button
              color="accent"
              type="submit"
              class="submit-button"
              [disabled]="loginForm.invalid"
            >
              <span>Login</span>
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </mat-card-actions>

          <!-- Error Message -->
          <div *ngIf="errorMessage" class="error-container">
            <mat-icon class="error-icon">error</mat-icon>
            <p class="error-message">{{ errorMessage }}</p>
          </div>
        </form>
      </mat-card-content>
    </mat-card>

    <!-- User role selector for demo purposes -->
    <div class="user-role-section">
      <p class="role-label">For demo access:</p>
      <div class="role-buttons">
        <button mat-stroked-button (click)="fillDemoCredentials('admin')" type="button">Admin</button>
        <button mat-stroked-button (click)="fillDemoCredentials('teacher')" type="button">Teacher</button>
        <button mat-stroked-button (click)="fillDemoCredentials('student')" type="button">Student</button>
      </div>
    </div>
  </div>
</div>
